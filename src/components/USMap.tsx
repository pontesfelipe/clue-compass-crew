import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { useStateScores } from "@/hooks/useStateData";
import { Skeleton } from "@/components/ui/skeleton";

const getScoreColor = (score: number): string => {
  if (score >= 80) return "#22c55e";
  if (score >= 70) return "#84cc16";
  if (score >= 60) return "#eab308";
  if (score >= 50) return "#f97316";
  return "#ef4444";
};

const getScoreGradient = (score: number): string => {
  if (score >= 80) return "url(#excellentGradient)";
  if (score >= 70) return "url(#goodGradient)";
  if (score >= 60) return "url(#averageGradient)";
  if (score >= 50) return "url(#poorGradient)";
  return "url(#badGradient)";
};

// Accurate US state paths from a standard SVG map
const statePaths: Record<string, { path: string; name: string }> = {
  AL: { path: "M628.5,466.5l-1.9-23.4l-1.4-15.8l-3.9-24.3l-0.7-7.7l24.7-2.5l16.3-2.2l8.7,25.1l1.4,12.9l3.9,30.3l2.4,12.4l-2,4.9l3.4,6l-1.9,6.5l-0.2,4.4l5.3,6.5l-4.4,3.5l-1.4,0.5l2.4,9.4l-11.5,1.7l-29.1,3.4l-4.4-27.6z", name: "Alabama" },
  AK: { path: "M161,583l-0.3-2l4.5-3.3l1.8-0.5l2.5,2l3,0.8l3.5-0.5l0.5-1.8l3-3l1.3-0.5l1-1.8l3-2.3l3.5-0.8l2.3-1.5l2.5,0.8l3.8-1l1-1.3l2-0.3l1.5-0.5l0.3-1.8l1.5-2.8l3.5,0.5l4.3,0.5l3.5-2.3l1.8,0.5l1.8-2.3l3-0.5l2.3,1.5l3.5-0.5l1.3,1l2.5-2.3l2.5-0.8l1.5-1l1.8,0.5l1.5,1l1.8,0.8l3.3,0.5l3.5-0.5l1,2.3l2,2l0.5,1.3l-0.5,2.8l-2.5,3.3l-3.3,2.5l-0.8,1.5l0.8,3.5l1.5,2l-0.5,2.5l-0.8,1.5l-3,2.8l-2.3,3.3l-1.3,2.3l-0.8,2.8l-2.8,3l0.3,2l2.5,1.5l0.3,1.3l-1.8,3l-3.3,3.5l-3.3,1.5l-5.8,0.5l-5.5,0.3l-4.5,1.3l-4.3,1.8l-3.5,3.5l-2.3,2.8l-4.5,1.8l-2.8,1.5l-3.8,0.8l-5.3,2.5l-3.5,0.8l-5.8,1l-3-0.3l-3.3,0.5l-4.8-0.5l-3.8-1.8l-3.8,0.3l-2,0.8l-2.5-1.8l-4-3.5l-5.8-3.5l-3.8-2.8l-2.5-3l0.5-1.3l-3.3-3.5l-4.8-2.8l-4.5-1.5l-4.3-1l-1.5-0.5l1-2.5l4-1.3l1.5-0.8l-0.5-1.8l-3.5-1.8l-0.3-2.8l3.3-1.3l3-2.3l0.5-2.3z", name: "Alaska" },
  AZ: { path: "M213.9,455.5l-1.4,1.5l-0.7,2.5l0.5,1.9l3.2,2.5l1.4,4.7l-2.1,4.4l-1.5,1.9l-0.5,1.4l0.5,1.4l-0.7,0.7l-3.5,0.5l-2.3,3l-1.7,5.3l-0.7,7.7l-0.5,2.6l2.5,0.7l4.1,2.5l1.9,0.5l1.2,1.7l5.3,0.5l2.1,2.1l-0.7,4.3l-1.4,1.4l0.7,1.4l-0.5,2.8l-0.5,1.4l-35.1-6l-26.8-5.3l-24-5l14.1-68l29.6,6l31,6.4z", name: "Arizona" },
  AR: { path: "M571.4,401.5l-6.9-0.3l-43.3,2.3l-18.1,0.7l1.2,10.2l0,11l-1.4,11l-1.4,7.9l-0.5,10.7l3.4,5.8l2.8,3l0.5,3.4l-3.2,4.3l0.2,2.6l3,2.3l40.2-0.5l19.3-0.7l5.3-0.5l0-3.9l0.5-7.4l-3.2-5.5l1.2-4.4l0.2-7.9l1.7-3l-3.4-5l1-6l2.8-3.4l-0.3-3.9l-1.4-14.1z", name: "Arkansas" },
  CA: { path: "M137.4,385.5l-1.4,7.2l-3.2,10l-5.5,11.9l-5.8,8.1l-4.1,4.6l-2.3,7.7l-3.7,6.7l-0.9,5.3l1.9,5l0.2,3.7l-2.3,2.8l-0.2,6.2l2.8,4.4l5,6l4.6,3.9l2.1,5.3l1.7,4.4l0,3l3.9,5.3l12.4,14.1l2.8,1.7l-0.2,1.4l-8.1,0l-13.4-0.5l-3-2.6l-4.8-0.9l-6-4.4l-4.6-1.4l-4.8-5.5l-3.7-4.4l-2.3-5l-2.5-1.4l-3,0.2l-2.8-2.5l-2.1-3.5l0.5-2.1l-2.8-4.1l-2.1-4.4l-1.7-0.5l-2.1-3l0.2-9l3-6l-0.7-1.9l1.4-3.2l4.1-6l1.7-5.1l-0.2-6.2l-2.6-4.4l-0.7-3.4l1.4-4.1l-0.5-7l-1.7-4.8l1.4-5.5l2.6-3.5l-1.4-0.7l0.5-5.1l2.8-4.1l-0.5-2.6l1.6-3.9l4.1-5.8l2.6-2.3l0-7.9l3-3.9l2.3-11.9l3.5-5.8l1.7-4.6l-0.2-2.1l1.9-3.2l-0.7-5l1.6-6.5l-1.4-6.2l-2.5-4.6l-2.3-8.6l2.1-0.3l6.2-4.9l3.4-1l1.4,0.2l4.1,3.9l1.8,4.4l1.4,3.6l-0.5,3.9l3.9,6.7l2.5,2.6l0.5,2.8l-1.4,0.5l0.5,3.2l5.5,6.9l2.6,1.8l19.3,24.8l19.3,25.5l9.3,12.9l-8.4,33.1z", name: "California" },
  CO: { path: "M379.8,303.5l-44.1-3.4l-46.2-5l-30.6-4.1l5.5-42.3l4.4-34.8l35,4.5l50.6,5.5l29.1,2.5l-1.7,38.5z", name: "Colorado" },
  CT: { path: "M852,210l-4.4,1l-21.8,4.6l-0.5-2.6l1.2-5.8l-1.6-3.2l3-3l3.9-2.8l1.2-4.3l4.6-1.4l8.4-1.4l5.3-0.5l1.5,5.8l0.5,8.1z", name: "Connecticut" },
  DE: { path: "M818,282.5l-0.5,3.2l-1.9,5.1l-2.3,6.3l-2.6,4.3l-3.9,0l-1.5-4.2l0.3-5.8l1.6-0.9l0.3-3.9l1.6-5.3l2.1-3l2.8,0.7l1.2-0.3z", name: "Delaware" },
  FL: { path: "M751.2,536l-2.1-3.4l-3.2-5.5l-3.4-3l-1.7-2.3l-3.7-0.5l-3.4-2.8l-3.7-2.5l-3-1.2l-0.9-2.6l-5.5-1.2l-4.8-1.9l-2.8-1.7l-3-2.6l-1.4-4.8l-4.1-2.6l-1.2-1.7l-3.5-0.2l-3.7-2.8l-0.9-4.3l-1.6-2.3l-5.5-1.6l-1.6,0.7l-2.1-1.2l2.5-3.7l-2.6-1.4l0.3-1.4l-2.8,0l-3.7,3.5l-0.5,3l-3.9,0.9l-3,3l-4.4,1.6l-0.9-1.7l0.2-2.8l-3.5-2.5l-4.4,1.4l-4.4,0.5l-4.4,0.9l-2.1,2.1l-4.6-0.7l-2.8,0.9l-5.5-0.5l-3.2,2.1l-2.5,2.5l-5-0.3l-1.9-0.5l1.7-3.7l-0.5-5.5l2.8-2.1l-1.4-2.8l-0.3-3.5l4.1-1.2l29.1-3.4l11.5-1.7l-2.4-9.4l1.4-0.5l4.4-3.5l-5.3-6.5l0.2-4.4l1.9-6.5l-3.4-6l2-4.9l25.4-2.3l19.8-0.5l3.7,3.4l5.1,5.5l2.6,6.7l4.4,5l1.4,4.4l2.8,2.1l-0.5,5.3l3.9,7.6l3.9,4.8l2.3,5.8l4.3,4.3l2.3,5.1l2.5,3.4l-0.3,7.6l-3.4,2.6l1.4,4.3l0.5,4.3l2.5,4.4l-0.3,5.5l-2.1,1.9l2.6,5l1.2,6.5l3.5,4.6l0.5,2.5l3.7,5.6l-0.5,2.8l2.1,3l-0.2,1.6l-3.5-0.3l-2.3,1.7l-2.5,0.7l-1.4-0.5l-1.6,1.7l-1.4,0l-1.6,2.1l-5.1-0.5l-1.6-1.2l-1.7,1.7l-2.1-2.1l0-2.5l-2.8-1.4l-3.7-1.7z", name: "Florida" },
  GA: { path: "M728.2,463l-2.8,0.9l-5.5-0.5l-3.2,2.1l-2.5,2.5l-5-0.3l-1.9-0.5l-3.9-27.6l-5.3-27.3l-4.8-22.7l24.2-3.9l33.1-5.5l5.1,25.8l2.6,13.8l4.1,10l3,6.3l-4.3,3.4l-2.8,5.5l-0.5,4.1l-3.4,6l-4.1,3.2l-2.5,4.4l-3.5,1l-0.5,2.3l-3.4,3l-2.1,3.5l0.2,2.6l-3.9,2.1l-1.6,4.8l-3,2.3l-0.3,3.2z", name: "Georgia" },
  HI: { path: "M233.5,560.3l1.5,3l-0.5,1.5l-3.5,0.5l-1.5-2l-0.5-2.5l2-1zM242.3,564l3,2.5l0.5,2l-1.5,2.5l-4.5,0l-2-0.5l-0.5-3l1-2zM258,571l3.5,3l0.5,1.5l-2.5,2l-1,2.5l-2,0.5l-2.5-0.5l-1-2l0-2l0.5-3zM268.8,580l4,3.5l-1.5,2.5l-4.5-0.5l-2-1l0-2.5zM284.5,590.5l2,4l4,2l3,3.5l-1.5,4l-4,0l-4.5-1l-3.5-3l-0.5-4.5l0.5-3.5z", name: "Hawaii" },
  ID: { path: "M229.9,81.5l5.5,24.5l-3.4,7l0.9,4.8l4.3,3.5l1.9,5l4.4,4.1l-0.2,4.3l4.8,7l1.2,1.4l-3.2,6.7l2.8,5l-1.4,2.6l1.9,4.6l4.1,5.8l2.5,1.9l0.7,1.2l-2.3,3.7l0,5.8l1.4,2.6l3.4,2.6l0.5,1.2l-0.9,4.6l3.2,3.5l0.7,2.5l-0.2,2.5l-6.7-0.3l-9.1-1.2l-11.5-1.7l-8.9-1.5l-8.6-1.4l-8.1-1.4l-4.4-0.7l4.1-24l5.3-32.4l-15.8-2.8l7-35.5l6.5-32.3l0.7-1.6l3,0.3l1.9,2.5l2.6-0.2l2.5-2.3l4.6,1l1.2,1.6l3.2,0l2.8,3.4z", name: "Idaho" },
  IL: { path: "M597.7,316.3l0.2-2.5l-0.2-3.4l2.3-4.6l4.1-4.1l0.5-5.3l-1.2-6l-0.2-8.9l-2.6-5.5l-0.5-5.5l1.2-3l-0.7-6l-2.5-4.8l-1.9,0.2l-1.6-1.2l-1-2.5l-8.1-7.9l-0.2-4.6l2.5-1.9l-0.2-2.8l-2.6-1.4l-0.9-4.3l2.5-6l5.5-4.6l0.5-3.7l-1.7-1.9l0.7-5.5l3.5-4.3l0-1.6l-12.6,1.4l-7.7,0.5l-7.2,0l-4.3-0.3l0.5,3.9l-1.9,2.8l-1.9,3l0.7,3.7l3.7,4.3l0.5,5.5l-0.5,15l-0.7,8.9l0.7,4.4l-2.6,3.4l-1.2,3.9l2.8,7l3.2,5l0,6.2l2.1,8.3l-0.2,4.4l-2.5,2.6l0,3.5l2.1,3.9l8.6,8.1l6.2,2.3l0.5,3.2l-1.9,1.6l-0.5,3l2.5,3l3.4,0.5l2.6,5l0.2,5.3l1,1.7l8.1-0.5z", name: "Illinois" },
  IN: { path: "M640.1,314l-0.7-5.3l-1.9-9.1l0.5-6.5l1.6-4.4l-1.2-3.7l0-3.4l-1.9-8.9l-2.6-11.5l-2.6-16.8l5.3-0.7l23.5-2.6l6.5-0.9l1.4,3l2.5,5.1l4.4,6.3l0.9,3.7l3.2,5.5l0.2,2.8l-3.5,3l0.7,2.1l3.2,1.7l0.5,3.7l-0.9,7.7l-2.1,9.6l0.2,10.3l-1.7,3l1.4,1.2l-0.9,5l-2.6,1.4l-3.9,4.4l-4.8,2.8l-2.5-0.2l-1.6,2.3l-3.4-0.3l-3.9-4.6l-3-0.7l-4.6,0.7l-2.6-2.3z", name: "Indiana" },
  IA: { path: "M566.5,222.9l-2.8-0.3l-1.6-2.6l-3-3l-6-2.1l-0.7-3.7l-2.5-4.4l-0.9-4.6l-4.4-4.3l-1.6-4.3l5.5-5l0.9-4.6l-0.9-3l-2.8-2.5l0.2-4.4l1.4-5.5l3-3l0.7-3.5l-3.5-3l-1.4-5.1l1.6-4.1l58.9-1.6l8.4-0.9l0.7,5.5l2.5,4.8l-0.7,6l-1.2,3l0.5,5.5l2.6,5.5l0.2,8.9l1.2,6l-0.5,5.3l-4.1,4.1l-2.3,4.6l0.2,3.4l-0.2,2.5l-2.6-0.2l-3.4,0.5l-3.5,2.5l-5.3,0.5l-2.3-2.1l-3.2,1.4l-1.6,2.1l-7,0.3l-5.5,0.2l-8.3,0z", name: "Iowa" },
  KS: { path: "M503.4,315l-80-2.1l-41.5-1.7l-0.5-3l1.4-39.9l1.7-38.5l35.5,1.4l46.4,1.4l44.3,0.3l-0.7,10.8l-1.2,17l-0.7,14.3l-0.5,11l-0.5,10.8l0,17.7z", name: "Kansas" },
  KY: { path: "M700,351l-5.8,4.4l-6,2.8l0,4.3l-3.2,4.4l1.2,3l-4.4,2.6l-1.2,3.5l-5,1l-3.4,4.3l-7.6,0l-5.5,5l-7.9-0.3l-4.8-3l-4.6,3.5l-4.3-0.3l-7.7,3.5l-2.6-3.2l-3.7,0.3l0.5-3.7l-3-2.1l3.9-4.6l2.5-5.6l6-6.7l5-3.2l0.2-2.6l-2.8-2.8l1.9-5l-2.3-2.5l3.7-0.3l2.6-2.5l4.6-1.6l6.2-5.3l1.9,0.7l3.4-2.1l10.7-4.8l2.5-2.6l3.7-0.2l2.1-2.3l6.9,0.7l4.4-3.2l3.5,2.5l4.6-1l0.5,2.8l4.6,0.5l0.5,2.6l2.6,0.7l-0.5,3l3,2.1l1.7,2.3l4.1-1.4l2.5,3l-2.6,3.5z", name: "Kentucky" },
  LA: { path: "M569,504l-1.9-7l-3.5-4.4l-2.1-6.3l0.2-7.4l3.4-2.3l-0.5-5.3l-3-4.4l0.3-19.6l-40.2,0.5l-3-2.3l-0.2-2.6l3.2-4.3l-0.5-3.4l-2.8-3l-3.4-5.8l-0.7,2.6l-5.6-0.2l-2.5-5.8l0.7-3.5l-1-5.5l-11.9,0.5l-10,0.5l-0.7,7l1.4,6.7l4.4,6l1.9,6.7l5.1,4.3l1.2,4.4l-1.9,7.6l-3,8.4l-0.3,5.6l-2.3,1.4l3.5,4.4l-1,2.1l0.9,1.4l-1.9,3.9l5,1.9l5.6,0.2l3.4,2.5l3.5-1l4.1,1.6l1,2.5l5.3,0.9l0.5-2.8l2.8-2.5l1.2,0l-0.7,3.5l4.4,1l1.2,1.9l5,0.2l2.1,1.4l-1.4,5.8l3.7,0.9l1.7,2.3l3.5,0.5l1.4,1.7l7.2,2.3l2.3-1.4l4.1,1l1.2,1.9l4.4,0.2l1.6-1.4l3.9,0.9l-0.5,1.9l-3.4,1.2l-0.9,1.9l-3,0.5l-0.7,1.9l1.4,1.7l-0.7,1.6l2.6,1.9l3.9-1.6l2.1-2.5l3-1.7l1.7,0.3l1.7,2.3l-2.6,1.2l-0.7,2.8l1.6,1.2l2.8-1.4l2.6,0.7l0,2.1l-1.6,2.6z", name: "Louisiana" },
  ME: { path: "M886.2,72.5l2.3,3.2l2.1,4.8l-1.4,5.3l-2.8,6.2l-0.2,3l1.2,3.9l-0.7,2.1l-0.7,5.5l-3,0.2l-1.2,2.8l1.9,2.5l0.3,3.4l-1.9,3.4l-2.5,0.3l-2.3,0.9l-0.3,4.1l-4.3,3l-1.2-0.5l-0.5,2.6l-3.4,3l-2.5-2.5l-1.4,0.9l1.6,2l-1.4,1.2l-0.7,4.1l-1.7-0.3l-2.1-3.9l-2.3,0.5l0.5,1.6l-1.9,1.9l0.2,4.8l-2.8-0.9l-3,2.8l-3.9,0.2l-2.5,1.4l-0.7,2.8l-2.8-0.5l-0.9-2.5l-1.6,0.9l-1.2,2.8l-1.2-0.9l0.2-3l-1.9-0.2l1.4-4.3l1-4.8l2.1-3l-0.5-1.9l2.6-2.6l2.8-1.4l1.2-2.1l-1.2-2.6l1.7-4.1l-1.7-9.6l-1.4-3l-0.2-3.9l-2.5-5.8l4.4-2.1l3-0.3l0.5-1.4l4.4-3l3-0.5l1.9,1.9l4.8,0.9l1-0.9l-0.2-3.4l3.4,0.2l2.1-3l0.2-3.4l1.4-4.6l-3-6.5l0.5-2.6l-0.7-4.8l2.1,0.5l5.1,3.9l4.3,0.2l6.2,3.4l4.6,3z", name: "Maine" },
  MD: { path: "M809.9,305l-3.4-1.9l-5.1-0.2l-2.6-3.5l-2.6-1l-1.9,0.7l-4.6-1l-1.4-4.4l-25.2,5.5l-21.8,4.3l-3.5,0.5l0.7-2.3l1.6-1.2l2.3-2.3l1.4-3.2l3.4-1l3.4-3l4.1-2.6l1-3l2.1,0.3l2.5,2l3.5-0.7l3-2.1l3.4,0.7l3.2,0.3l3.2-1.4l3.4-3.2l1.9-4.3l1.2-0.7l1.7,0.9l3.4,0l-0.5,3l3.9,0.3l3.5-2.5l2.8,0.7l0.2,3.2l-1.2,1.4l-0.3,2.6l0.7,1l-0.7,0.9l-1.6,0.9l-0.3,3.9l-1.6,0.9l0.3,5.8l1.5,4.2l6.3,0.5l6.7-0.2l-0.5,3.9l1.2,3.9l0.7,2.1l2.1,1l1.2,1.6l-1.4,0.3z", name: "Maryland" },
  MA: { path: "M893.7,189.9l1-3.2l-1.4-2.6l0.7-1.4l2.3-0.2l3.2,3.7l0.2,2.1zM877.5,189.2l3,1.2l1.2-0.7l1.4,0.5l1.4-1.7l-1.7-0.7l-2.6,0l-3.2-1l-1,1.2zM852,210l1.4-5.1l2.6-2.6l2.5,0.5l1.7-1.4l5.6,0.2l9.8-3.7l3.5-4.8l3-1l1.6,2.6l-2.5,2.6l-0.2,1.7l2.5,0l0.3,1.9l-1.9,0.7l1,2.5l4.1-2.3l1.4-3.4l1.7,0.3l1.6,3.2l3.4,0.3l3.7,3.4l4.1,1.2l2.3-0.2l2.5-2.5l-0.9-1.6l-2.8-0.5l-5-3l-0.7-3.5l1-0.5l2.8,2.3l3.5,1.2l3,0.2l2.8,1.9l2.3,2.5l1.7-0.3l0.7,1.7l-1.6,1.9l-4.3-0.2l-7.6-0.5l-13,1.9l-2.6,1.9l-2.5-0.3l-0.5-3.5l0.9-1.2l-0.7-0.7l-3.4,2.3l-1,3l-5.3,1.4l-3.7,1.7l-3.5-0.3l-3.4,0.2l-0.5,2.6l-5.3,0.5z", name: "Massachusetts" },
  MI: { path: "M555.9,124.4l0.3-2.8l2.1-2.8l2.1-1.4l1-3.2l-0.5-4.8l3.9-0.7l2.3-1.9l5.1,0.5l2.6-0.9l0.2-1.4l-4.8-2.3l-6.9-1.6l-1.2-1l1.7-1.7l4.1-0.5l3.4-1.9l3.5-3.4l3.9-1l5-0.9l3.4,1.4l3.4,1.2l3.2-0.5l6.2,0l1,1.2l4.4,0.5l3.2-1.4l0.5-2.6l2.3-0.5l2.5,0.7l0.2,1.2l-2.8,5l-1.4,1.9l0.9,1.7l-3,2.3l0.5,3.5l3.2,3l0.5,3.9l-1.2,3l0.7,1.7l-0.7,3.2l-1.6,5.1l2.5,4.4l-0.2,3l-0.9,0.7l0.2,5.1l3.9,3.7l1.4,0.2l2.3-1.7l1.7,0.9l1.6,5.8l-0.5,4.6l-1,2.6l0.3,2.6l-0.9,3.7l-2.3,3.9l1.6,1l0.7,4.6l-0.7,1.4l1.4,2.6l-0.2,1.9l-2.1-0.9l-0.5,2.3l-2.1,0.7l0.2,4.6l1.2,0.7l0.2,1.6l-1.9,0.3l-0.9,2.5l0.5,2.1l-3.4,2.6l-3,0.2l-0.3-1.9l1.6-1.9l0.3-4.3l1-0.7l-0.5-6.5l-3.4-5l-2.3-2.6l-1.9,0.7l-4.4,1.6l-2.3,2.3l-1.6,0.2l-0.5-1.2l-4.6,2.1l-1.2,2.6l-10.1,2.6l-2.8,1.9l-5.8,1.6l-2.1,1.6l-0.2,2.3l-2.8,0.2l-2.6,1.2l-2.3,0l-10.5,3.2l0.2-2.8l3.2-4.4l1.7-3.2l-0.9-0.5l-3.2,1.7l-1.9-0.3l-0.9-4.6l1.2-0.7l0.5-4.3l1.9-0.2l4.1-3.2l0.5-2.5l-0.5-4.8l-2.5-1l-2.1-1.6l-2.3-3.7l-3.4-4.3l-3.4-2.1l0.3-4.6l1.4-4.4l-0.5-1l2.5-0.2l0.3-2.6l1.4-1.2l-0.7-2.1l1.7-4.4l3-3.5l-0.5-1.4l0.9-3.2zM568.9,95.2l2.6-1.9l3-1.7l4.6-0.2l1.6,1.4l0.3,1.9l0.9,0.5l4.4-1.2l1-1.9l6.2-2.5l2.5,0.2l0.3,0.9l-2.5,2.3l-4.3,1.9l-3.4,2.3l-0.5,2.1l-3,0.3l-3,2.5l-4.6,0.9l-0.7-1.6l-2.5-0.9l-0.3-2.3l-2.5-2.3z", name: "Michigan" },
  MN: { path: "M547.5,156.6l0.3-5.5l-2.5-5.6l-0.5-8.4l-0.7-11.5l-2.3-7l-1.4-8.3l-0.9-11.5l-0.7-3.9l1.6-0.3l0.3-6.9l-3.9-5.3l0-2.3l-1.4-0.5l-0.2-6.9l21.8-0.5l0.2-8.4l0.5-0.7l25,0.3l0.9,6.7l2.5,1.6l4.1-0.3l0.2,1.9l5,0.5l0.5,6.3l2.6,1.6l0.7-0.5l4.3,0.5l1,2.1l4.4,3l1.4,4.1l2.1,2.8l2.5,0.3l2.5,2.1l0.7,8.8l3,2.1l2.5,0l0.5,6l-4.3,2.5l-3.5,5.1l0.2,5.8l1.4,0.9l5.1,0.2l0.9,4.1l-0.5,6.9l-0.9,5.1l0,3.5l-58.9,1.6z", name: "Minnesota" },
  MS: { path: "M611,503.5l-3.9,0.5l-27.2,1.7l-11.9,0.5l1.4,1.2l-0.2,3.4l-1.2,2.1l0.3,1.9l2.1-0.2l0.2,2.1l-2.5,0.7l-1.2,5.6l-2.8,3l0.7,1.6l-1.7,1.7l1.9,7l3.5,4.4l-1.4,0.2l-0.3,2.1l5.8-0.5l29.6-3.2l3.5-0.5l0.2-4.1l3-2.3l1.6-4.8l3.9-2.1l-0.2-2.6l2.1-3.5l3.4-3l0.5-2.3l3.5-1l2.5-4.4l4.1-3.2l3.4-6l0.5-4.1l2.8-5.5l4.3-3.4l-3-6.3l-4.1-10l-2.6-13.8l-5.1-25.8l-3.5,0.5l-0.3,3.9l-2.8,3.4l-1,6l3.4,5l-1.7,3l-0.2,7.9l-1.2,4.4l3.2,5.5l-0.5,7.4l0,3.9l-5.3,0.5l0.3,19.6l3,4.4l0.5,5.3l-3.4,2.3l-0.2,7.4l2.1,6.3z", name: "Mississippi" },
  MO: { path: "M567.4,400.8l-43.2,2.1l-18.4,0.5l0.2-5l0.2-9.6l-0.2-9.1l-2.1-6.9l-4.1-5l-0.2-3.2l3.5-4.3l3.5-2.8l-0.7-3.2l-5.5-3l-0.9-2.8l0-17.7l0.5-10.8l0.5-11l0.7-14.3l1.2-17l0.7-10.8l9,0.3l7.7,0l3.9-0.2l3.4-0.2l-0.2,0.7l2.5,3.5l3.5,4.1l4.6,1.4l4.4,0.3l2.8,1.7l4.4-2.5l2.3-4.3l3.4-1.6l3-0.2l1.4,1.7l1.9,2.8l3.4,0.3l0.3,2.8l-3.5,4.3l-0.7,5.5l1.7,1.9l-0.5,3.7l-5.5,4.6l-2.5,6l0.9,4.3l2.6,1.4l0.2,2.8l-2.5,1.9l0.2,4.6l8.1,7.9l1,2.5l1.6,1.2l1.9-0.2l-0.2,1.6l8.3,0l5.5-0.2l7-0.3l1.6-2.1l3.2-1.4l2.3,2.1l5.3-0.5l3.5-2.5l3.4-0.5l2.6,0.2l-1.6,1.4l-3.9,0.2l-2.1,2.3l-6.9-0.7l-2.1,2.3l-3.7,0.2l-2.5,2.6l-10.7,4.8l-3.4,2.1l-1.9-0.7l-6.2,5.3l-4.6,1.6l-2.6,2.5l-3.7,0.3l2.3,2.5l-1.9,5l2.8,2.8l-0.2,2.6l-5,3.2l-6,6.7l-2.5,5.6l-3.9,4.6l3,2.1l-0.5,3.7l3.7-0.3l2.6,3.2z", name: "Missouri" },
  MT: { path: "M313.2,148l-3.7-0.3l-22.3-2.6l-18.6-2.6l-21.5-3.4l-14.6-2.5l-14.4-2.8l-9.1-1.7l0.9-4.6l-0.5-1.2l-3.4-2.6l-1.4-2.6l0-5.8l2.3-3.7l-0.7-1.2l-2.5-1.9l-4.1-5.8l-1.9-4.6l1.4-2.6l-2.8-5l3.2-6.7l-1.2-1.4l-4.8-7l0.2-4.3l-4.4-4.1l-1.9-5l-4.3-3.5l-0.9-4.8l3.4-7l-5.5-24.5l24.5,4.4l14.8,2.3l14.4,1.9l14.4,1.7l15,1.5l30.4,2.6l25,1.7l-2.8,43.5l-2.1,45.5z", name: "Montana" },
  NE: { path: "M417.5,230.8l-49.6-3.9l-35-3.7l-19.5-2.5l5.5-42.3l35.5,4.4l50.1,5l29.3,2.3l-0.2,6.3l-3.5,3l-4.3,1.4l-5.1,3.2l-1.9,2.1l-0.9,4.6l-0.9,7.6l0.3,4.4l4.1,6.9l0.7,3.9z", name: "Nebraska" },
  NV: { path: "M175.5,345.3l-9.7-11.9l-18-23.1l-11.7-15.1l18.8-36.3l17.2-36l-7.7-14.4l26.5-55.1l4.4,0.7l8.1,1.4l8.6,1.4l-5.3,32.4l-4.1,24l-4.3,24.5l-5.5,28l-3.7,22.5l-3.4,20.5l-2.6,16.5l-2.5,14.8z", name: "Nevada" },
  NH: { path: "M867.2,162l-0.3-2.8l-0.7-2.1l1.2-3.7l-2.3-4.8l0.3-5l-1.7-5.8l0.2-3.5l-0.5-3.5l-3.5-1.4l-0.7-5l0.5-3.2l-0.5-3.4l1.4-6.7l-0.2-2.6l-2.8-0.7l-1-3.2l1.2-1.4l0.3-6.2l-1-1.9l-0.3-5.6l3.5-1.2l5.8-5.6l2.5-0.9l-0.5,2.6l3,6.5l-1.4,4.6l-0.2,3.4l-2.1,3l-3.4-0.2l0.2,3.4l-1,0.9l-4.8-0.9l-1.9-1.9l-3,0.5l-0.5,1.4l-3,0.3l0.2,3.4l1.2,2.3l0.2,4.4l2.6,0.9l0.9,6.2l-0.5,2.8l2.3,2.1l-0.7,3l2.8,0l1,2.6l0.5,5.1l0.2,4.4l-0.5,1.6l0.9,1.4l-0.2,2.8l2.8,0.2l0.5,2.6l-0.5,2.8z", name: "New Hampshire" },
  NJ: { path: "M830,281l-1.2,0.3l-2.8-0.7l-2.1,3l-1.6,5.3l-0.3,3.9l-1.6,0.9l0.7,3l3.2,2.6l3.2,1.4l1.7,3.9l3,3.4l2.6,0.5l1.6-2.3l0.7-3l-1.9-1.9l0.3-1.4l0.9-3.9l-1.4-3l-0.5-2.5l-1.6-0.3l-0.5-3.4l2.8-4.4l1-3.2l0.2-4.1l-1.4-2.1l-2.6,0.5l-0.5,2.1l-1.4,3z", name: "New Jersey" },
  NM: { path: "M308.9,481.5l-35.1-5.5l-26.3-5l-24.2-4.8l8.3-43.3l4.8-25.2l5.8-35.1l2.6,0.3l0.5-3.4l4.1-0.2l35,5.5l30.6,4.1l-5,39.4l0,2.5l-1.4,38.5z", name: "New Mexico" },
  NY: { path: "M834.2,197.7l-1.7,2.3l-2.8,1l-2.1,2.6l-1.6,2.5l-0.2,1.6l3.5,0l1.6,1.2l4.4-3l3-1.7l4.6-0.2l5.6-1.6l5.6-1.4l5.6-2.1l2.5-1.7l2.5-3.9l3-3.4l3.2-2.3l0.5-1.6l-0.5-2.6l-2.5-2.1l-1.7,0.5l-3.5,2.6l-4.3,1.2l-5.5,0.7l-6,1.7l-6.5,2.5l-4.4,2.3l-2.6,2.8zM852,210l4.4-1l21.8-4.6l0.5,2.6l-1.4,5.1l-0.9,4.4l0.9,1.9l-0.5,1.6l-3.5,3.2l-5,5.5l-3.5,2.8l-1.7,0.3l-1.9-0.3l-3.4-2.8l-3.5-0.9l-4.3,0l-7,1.4l-4.1,1.7l-5.6,1.4l0.2-2l2.3-1.4l0.2-2.5l-1.7-2.5l-3.4-2l-0.7-0.5l0.2-1.2l4.8,0.3l4.1-0.9l5.8-4.6l2.5-3.4l3.5-4.3l0.5-1.6l0.2-3.9zM809.9,245l1.4,1.4l-0.3,3.2l0.7,0.7l0.7-0.5l1.2-2.5l2.3-2.8l3.4,0l2.3-1.6l3.2,0l2.3,1l0.5,1.6l-2.8,1.9l-5,4.4l-3.9,4.4l-4.6,4.6l-6.5,4.6l-5.5,2.8l-4.6,1.2l-10.3,2.3l-5.8,0.3l0.7,5l0.9,2.3l0.5,3l-0.7,2.3l3.5-0.5l21.8-4.3l25.2-5.5l1.4,4.4l4.6,1l1.9-0.7l2.6,1l2.6,3.5l5.1,0.2l3.4,1.9l-0.2,5.6l-1.2,1.4l0.9,2.3l-0.2,4.1l-1,3.2l-2.8,4.4l0.5,3.4l1.6,0.3l-1.2-1.6l-2.1-1l-0.7-2.1l-1.2-3.9l0.5-3.9l-6.7,0.2l-6.3-0.5l3.9,0l-1.5-4.2l-0.3-5.8l1.6-0.9l0.3-3.9l0.7-0.9l-0.7-1l0.3-2.6l1.2-1.4l-0.2-3.2l-2.8-0.7l-3.5,2.5l-3.9-0.3l0.5-3l-3.4,0l-1.7-0.9l-1.2,0.7l-1.9,4.3l-3.4,3.2l-3.2,1.4l-3.2-0.3l-3.4-0.7l-3,2.1l-3.5,0.7l-2.5-2l-2.1-0.3l-1,3l-4.1,2.6l-3.4,3l-3.4,1l-1.4,3.2l-2.3,2.3l-1.6,1.2l-31.5,7.4l-9.1,1.6l-1-6l-0.5-6.2l-2.1-2.6l-2.6-4.3l-2.5-4.6l-0.2-3.2l2.8-1.9l0.2-2.3l3.5-3.2l2.8-1.7l3.9-1l1.6-3.2l4.3-3.9l0.3-3l-4.4-3.5l-1.6-5.3l-2.8-5l2.6-2.5l6.2-3.2l6-1.6l4.1-0.3l3.4,2.5l3.2,0.5l3.7-3l5.1-1.4l6.2-0.5l2.5-1.7l2.5-4.8l4.3-1.4l2.1-2l0.7-2.1l5-3.7l0.9-2.1l-0.7-6.7l2.3-4.4l2.3-1.4l3.4,1.4z", name: "New York" },
  NC: { path: "M830.7,379l0.2,5.1l2.3,5.1l2.8-0.7l0.7,3.7l-2.5,0.3l-0.5,4.1l-2.3-0.2l-0.3-0.5l-3.4-0.5l-6,1.7l-0.5-1.7l-3.9,2.8l-4.8,4.1l-5,6.9l-2.1,0.5l-0.5,1.7l2.1,1.2l-2.1,5.6l-3.4,0.3l-3.4,0.5l-3.9-2.1l-0.5,3l-12.7,1.4l-12.4,0.3l-17.2,1.2l-23.5,0.7l-18.4,0.2l-18.4-0.3l-7.4-0.3l2.6-3.5l-2.5-3l4.1,1.4l-1.7-2.3l-3-2.1l0.5-3l-2.6-0.7l-0.5-2.6l-4.6-0.5l-0.5-2.8l4.6,1l-3.5-2.5l-4.4,3.2l-6.9-0.7l4.4-6.5l4.4-4.3l3-2.5l5.6-0.7l11.5-2.6l8.4-0.5l5.1-2.3l6-1.2l3.2-2.5l5-1.4l3.9,0.5l3-4.4l5.1,0.3l3.4-1.2l1.9,0.7l4.8-3.4l5-1.2l3.5-1.7l4.6,0.2l0.7-2.3l4.6-0.7l3.4-2.6l5.5-4.4l3-1.4l1.2-2.5l3.5,0l0.7-0.5l4.3,0l23.3-3.4l21.5-3z", name: "North Carolina" },
  ND: { path: "M495.2,148.7l-0.3,11.7l0.5,8.1l1.4,8.3l1.7,5.8l0.3,4.4l-64.4-1.4l-35.5-1.4l2.1-45.5l2.8-43.5l24.7,1.4l22.8,0.9l23.5,0.5l23,0.2l-0.9,11.5l1.4,8.3l2.3,7l0.7,11.5l0.5,8.4z", name: "North Dakota" },
  OH: { path: "M731.3,310l-2.6,2.1l-3.4,3.9l-2.6,5.1l-2.6,3.4l1.2,3.2l-3.7,3l-2.6,5.5l-0.5,5.1l-5.8-4.3l-6.9-1.9l-1.6,1.4l-2.6-0.3l-0.5-2.3l-3.5-0.3l-3-3.2l-4.4,4.4l-3.5-0.7l-2.5,2.6l-2.6-3l-3.7,0.2l-3,3.7l-0.9,3l-4.1-0.7l-2.3-0.3l-1.4-3.2l-3.9-0.9l0.9-5l2.6-1.4l-1.4-1.2l1.7-3l-0.2-10.3l2.1-9.6l0.9-7.7l-0.5-3.7l-3.2-1.7l-0.7-2.1l3.5-3l-0.2-2.8l-3.2-5.5l-0.9-3.7l-4.4-6.3l-2.5-5.1l-1.4-3l5.5-1l11.5-1.6l6.9-1.4l9.6-1.4l12.9-1.7l2.1,2.3l4.3,3.4l0.9,4.6l5.8,0.2l2.3,2.3l0.5,2.3l4.1,5l-1,4.1l2.3,3l-0.2,2.3l2.3,1.7l5.1,3.5l1.7,2.8l-0.5,1.6l2.8,3.7z", name: "Ohio" },
  OK: { path: "M420.9,395l-46.4-1.2l-0.2-12.4l-25.4-0.7l-25.7-1.4l-0.7,9.8l-0.9-0.5l-2.6-2.5l-3.7-0.7l-1.2-2.6l-3.9-1.4l-2.1-2.3l-3.4,1.4l0.7,3.7l-2.8-1.4l-2.1,2.8l0.5,2.8l-1.7,1.4l0.7,3l-3.4,0.2l-2.6-3l-2.5,2.3l-0.2,2.6l-2.1-1.9l-0.7-3.4l-3.4-1.2l-1.6,1.9l-4.4,0.9l-0.2-2.3l-3.7-2.1l-3.4,1.7l-2.3-0.7l-0.7-2.8l-2.6-0.5l-2.8,1.6l-2.3-0.7l-4.3-2.6l-3-0.5l-2.3,0.5l-1.4-2.5l-4.1,1.2l-1.4-0.7l-2.1,1.9l-2.5-2.1l-3.5-0.7l-1.4,1.2l0.9,2.8l5.5,3l0.7,3.2l-3.5,2.8l-3.5,4.3l0.2,3.2l4.1,5l2.1,6.9l0.2,9.1l-0.2,9.6l-0.2,5l-18.4-0.5l-46.2-1.2l-1.4-39.9l36.2-1.9l62.9-3l0.5,10.5l40.2-2.1l21.8-1.6l0.5,16.1z", name: "Oklahoma" },
  OR: { path: "M184.9,207.2l-6.5,0.2l-6.5-0.5l-3.7,0.3l-7,3.7l-3.2,0.5l-2.5-0.5l-5.1,1l-5.5-0.2l-5.1,2l-3.7-0.3l-1.9-2.5l-4.1-2.6l-4.8-1.4l0.3-4.4l1.7-4.6l0.2-6l-2.8-5l0-5l-3.2-6.5l0.5-1.9l0.2-4.3l-1.6-0.9l-0.7-4.6l1.4-2.6l1.2-6.2l3-4.3l-1.2-1.4l0.5-4.4l6.2-0.2l4.6,1l3.4-0.3l5.3-3.2l1.4-2.5l0.7,0.2l1.2,3.9l2.3,3.2l4.3,2.5l4.6,1.9l6.5,1.7l0.9-1l5.3,1.4l5.5,0.9l2.6,2.3l5,1.4l4.8,0.5l2.6,1.4l3.5,0.3l5.6,1.4l6.3,0.5l3.7,2.3l-7,35.5l15.8,2.8z", name: "Oregon" },
  PA: { path: "M810.3,246.1l-0.7,2.1l-2.1,2l-4.3,1.4l-2.5,4.8l-2.5,1.7l-6.2,0.5l-5.1,1.4l-3.7,3l-3.2-0.5l-3.4-2.5l-4.1,0.3l-6,1.6l-6.2,3.2l-2.6,2.5l-0.3-2.3l-9.6,1.4l-12.9,1.7l-9.6,1.4l-6.9,1.4l-11.5,1.6l-5.5,1l-6.5,0.9l-0.7-4.6l-2.1-1.2l-2.1-3l1-3.4l2.6-3.7l0.5-7.9l2.1-3.4l3.4-4.8l-0.2-3.4l2.8-0.2l2.8-1.2l31.5-7.4l9.1-1.6l1-6l0.5,6.2l1,6l3.4-0.2l5.6-1.4l4.1-1.7l7-1.4l4.3,0l3.5,0.9l3.4,2.8l1.9,0.3l1.7-0.3l5,6.9l1.4,2.1l3.2,1l4.3-0.7l6-2.8l4.6,2.5z", name: "Pennsylvania" },
  RI: { path: "M865.2,207.8l-0.9-6.2l-2.6-0.9l-0.2-4.4l-1.2-2.3l4.6-1.4l2.5,4.6l2.3,3.7l0.2,2.3l-1.7,3.2z", name: "Rhode Island" },
  SC: { path: "M729.4,460.3l-3.5,0.9l-4.8-1.9l-1.4-3.2l-3.5-1.4l-2.1-3.7l-4.4-4.4l-4.4-1l-2.5-3.9l-4.4-2.6l-2.1-0.3l-2.3-3l-4.6-2.1l-2.6,0.9l-3.4-1.2l1.6-2.3l-0.3-5.3l-3.9-3l-0.3-2.6l-2.5-4.3l-4.3-3.4l0.5-1.9l-5.6-4.3l-1.7-2.8l1.4-1.7l7.4,0.3l18.4,0.3l18.4-0.2l23.5-0.7l17.2-1.2l4.1,9.3l1.7,10.5l-3.4,1.9l-1.7,5l-4.3,1l-3.7,5.1l-3.5,3.9l-0.9,3l-3.5,4.8l-4.3,5.1l-2.3,0.5l-0.7,2.6l-2.3,3z", name: "South Carolina" },
  SD: { path: "M493.8,231.8l-0.3-4.4l-1.7-5.8l-1.4-8.3l-0.5-8.1l0.3-11.7l-2.5-5.6l-0.3-5.5l64.4,1.4l-1.6,4.1l1.4,5.1l3.5,3l-0.7,3.5l-3,3l-1.4,5.5l-0.2,4.4l2.8,2.5l0.9,3l-0.9,4.6l-5.5,5l1.6,4.3l4.4,4.3l0.9,4.6l2.5,4.4l0.7,3.7l-8.4,0.9l-58.9,1.6l-1.4-4.3l0.3-6.9l-0.5-6z", name: "South Dakota" },
  TN: { path: "M700,351l2.1,4.4l-0.7,4.8l-1.7,2.8l-2.8,4.1l1.2,2.1l-1.6,5.1l-1.6,3l0.2,1.6l-2.3,3.9l-0.2,2.1l-18.8,1.7l-22.3,1.9l-7.2,0.3l-26.3,2.3l-4.4,0.2l-12.9,0.9l0.5-2.3l-3.9-3l-1.6-3.4l-5.6-0.3l-0.7-1.7l-5.5-0.3l-2.6-3.4l-2.1-2.1l1.4-3.7l7.7-3.5l4.3,0.3l4.6-3.5l4.8,3l7.9,0.3l5.5-5l7.6,0l3.4-4.3l5-1l1.2-3.5l4.4-2.6l-1.2-3l3.2-4.4l0-4.3l6-2.8l5.8-4.4l5.3,0.9l3.9,3.4l0.7,3l7.9,0l3.9-2.6l2.6,0.3l1.4,3l5.8,2.1l3.2-0.3l3,3.2z", name: "Tennessee" },
  TX: { path: "M420.9,395l0.5,5.3l5.5,3.9l2.8,0.7l1.2,1.6l2.1,0.2l3.7,4.8l3.2,0.2l2.8,1.4l3.4-2.5l4.1-0.3l3.5-0.7l3-0.2l2.3,0.5l5-2.8l4.4-0.5l4.1,0.9l0.2,2.6l3.5,3l-0.2,5.6l0.9,2.5l2.6,4.1l1.6,0.5l0.9,2.5l2.6,2.5l2.1,0.3l1.4,2.3l1.9-0.2l2.5,1.4l2.6,0.2l4.1,2.1l1.6,3.2l2.3,6l3.9,1.6l3,2.5l2.8,1.6l2.5,0.5l0.5,1.2l4.3,2.5l2.1,2.5l3.2,1l3,3l-0.5,17.9l-0.5,17l1.6,11.2l1.6,2.3l0.9,3.4l2.3,0.7l-0.2,2.3l-2.1,1.9l0.7,0.9l-2.6,4.4l-0.9,6.5l-0.5,4.3l0.3,3l3.9,4.4l1.2,5.5l3.5,3.4l-0.7,3.7l-1.9,1.9l-3.4,8.8l-0.5,4.4l0.7,1.7l-1.2,5l0.2,3.5l-1.6,5.1l-7.4-4.1l-8.3-2.3l-2.8-2.1l-4.3-0.2l-5.6,2.5l-4.8,2.1l-1,1.9l-3.5,1.7l-3.7,1.6l-2.1,2.3l-2.5,1l-3.5,3.9l-3.9,0.9l-6-2.5l-5.3-0.5l-0.5-1.9l-2.3-1.9l0.5-2.3l-3-3l-5.6-1.7l-5.8-4.8l-1.6-2.8l0.2-2.1l-3.4-5l-6.3-1.7l-5.3-4.4l-2.1-0.9l-0.2-1.7l-2.8-2.6l-0.9-2.5l-3.2-0.9l-6.5-5.8l-0.9-1.4l0-2.5l-1.4-2.1l-4.1-1.9l-6.5-6l-0.3-0.9l-4.4-1.9l-3-4.1l-4.1-2.1l-0.5-0.9l-2.8-0.7l-4.6,1.4l-4.4-0.5l-2.6-2.8l-3.5-0.5l-2.3-1l-1.4-3.2l-3-0.7l-1-2.1l-3.7-1.4l-0.5-3.2l-2.3-2.3l0.2-1.9l-3-3.5l0.3-0.7l-0.5-3.9l-2.3-1.7l-0.7-4.6l-2.3-2.5l0.7-5l-1.4-0.9l0.3-5.1l-0.9-3.5l1.4-5.3l-0.5-5.3l1.9-3.5l0.2-7.6l0.9-0.5l-0.2-7.7l1-2.1l-0.5-3.4l0.5-2.5l1.6-0.5l-0.5-4.4l1-1.9l-0.5-3.4l-1.2-2.5l0.5-4.6l2.1-4.6l0.5-5.6l1-1.6l-0.7-3.9l2.3-5.1l18.4,0.5l46.2,1.2l1.4,39.9l25.7,1.4l25.4,0.7l0.2,12.4l46.4,1.2z", name: "Texas" },
  UT: { path: "M258.9,363.8l-35-5.5l-4.1,0.2l-0.5,3.4l-2.6-0.3l-5.8,35.1l-4.8,25.2l-29.6-6l-31-6.4l2.5-14.8l2.6-16.5l3.4-20.5l3.7-22.5l5.5-28l4.3-24.5l4.1-24l8.9,1.5l11.5,1.7l9.1,1.2l6.7,0.3l-4.4,34.8l35,4.5l46.2,5l-0.5,3l-19.5-2.5z", name: "Utah" },
  VT: { path: "M838.5,183.1l0.2-3.9l-0.5-1.6l-3.5,4.3l-2.5,3.4l-5.8,4.6l-4.1,0.9l-4.8-0.3l-0.2,1.2l-2.3,1.4l-2.3,4.4l0.7,6.7l-0.9,2.1l-5,3.7l0-1.6l3.5-4.3l0.7-5.5l-1.7-1.9l0.5-3.7l5.5-4.6l2.5-6l-0.9-4.3l-2.6-1.4l-0.2-2.8l2.5-1.9l-0.2-4.6l-8.1-7.9l-1-2.5l-1.6-1.2l-1.9,0.2l1.6-1.4l-0.2-2.5l0.5-2.8l-0.5-2.6l-2.8-0.2l0.2-2.8l-0.9-1.4l0.5-1.6l-0.2-4.4l-0.5-5.1l-1-2.6l-2.8,0l0.7-3l-2.3-2.1l0.5-2.8l-0.9-6.2l-2.6-0.9l3-0.3l4.4-3l0.5-1.4l3-0.5l1.9,1.9l4.8,0.9l1-0.9l-0.2-3.4l3.4,0.2l2.1-3l-0.2-3.4l-3-6.5l0.5-2.6l0.9,2.3l2.8,0.2l0.5,2.5l3.4,0.5l0.5,3l3.4,1.9l0.3,3l-0.2,3.5l1.7,6l-0.3,5l2.3,4.8l-1.2,3.7l0.7,2.3l0.3,2.8l-3.2-0.2l-0.9,0.9l-0.5,3l0.9,0.9l1.7,1z", name: "Vermont" },
  VA: { path: "M828.7,353.1l-1.2-1.4l-0.2-5.6l-3.4-1.9l-5.1-0.2l-2.6-3.5l-2.6-1l-1.9,0.7l-4.6-1l-1.4-4.4l1.4-0.3l-1.2-1.6l-2.1-1l-0.7-2.1l-1.2-3.9l0.5-3.9l-6.7,0.2l-6.3-0.5l-3.9,0l-1.5-4.2l-0.3-5.8l1.6-0.9l0.3-3.9l0.7-0.9l-0.7-1l0.3-2.6l1.2-1.4l-0.2-3.2l-2.8-0.7l-3.5,2.5l-3.9-0.3l0.5-3l-3.4,0l-1.7-0.9l-1.2,0.7l-1.9,4.3l-3.4,3.2l-3.2,1.4l-3.2-0.3l-3.4-0.7l-3,2.1l-3.5,0.7l-2.5-2l-2.1-0.3l-1,3l-4.1,2.6l-3.4,3l-3.4,1l-1.4,3.2l-2.3,2.3l-1.6,1.2l-0.7,2.3l-5.5,0.2l0.2-2.1l2.3-3.9l-0.2-1.6l1.6-3l1.6-5.1l-1.2-2.1l2.8-4.1l1.7-2.8l0.7-4.8l-2.1-4.4l-3-3.2l-3.2,0.3l-5.8-2.1l-1.4-3l-2.6-0.3l-3.9,2.6l-7.9,0l-0.7-3l-3.9-3.4l-5.3-0.9l5.8-4.4l-2.5-3l-2.6-3.5l-4.1,1.4l-1.7-2.3l-3-2.1l0.5-3l2.6-0.7l-0.5-2.6l-4.6-0.5l-0.5-2.8l-4.6,1l-3.5-2.5l12.9-1.7l9.6-1.4l6.9-1.4l11.5-1.6l5.5-1l23.5-2.6l5.3-0.7l2.6,16.8l1.9,8.9l0,3.4l1.2,3.7l-1.6,4.4l-0.5,6.5l1.9,9.1l0.7,5.3l3.5,1.9l2.6,2.3l4.6-0.7l3,0.7l3.9,4.6l3.4,0.3l1.6-2.3l2.5,0.2l4.8-2.8l3.9-4.4l2.6-1.4l0.9-5l-1.4-1.2l1.7-3l-0.2-10.3l2.1-9.6l0.9-7.7l-0.5-3.7l-3.2-1.7l-0.7-2.1l3.5-3l-0.2-2.8l5.1-0.7l0.7-0.5l-4.3,0l-0.7,0.5l-3.5,0l-1.2,2.5l-3,1.4l-5.5,4.4l-3.4,2.6l-4.6,0.7l-0.7,2.3l-4.6-0.2l-3.5,1.7l-5,1.2l-4.8,3.4l-1.9-0.7l-3.4,1.2l-5.1-0.3l-3,4.4l-3.9-0.5l-5,1.4l-3.2,2.5l-6,1.2l-5.1,2.3l-8.4,0.5l-11.5,2.6l-5.6,0.7l-3,2.5l-4.4,4.3l-4.4,6.5l6.9,0.7l4.4-3.2l3.5,2.5l-4.6-1l0.5,2.8l4.6,0.5l0.5,2.6l2.6,0.7l-0.5,3l3,2.1l1.7,2.3l-4.1-1.4l2.5,3l-2.6,3.5l7.4,0.3l18.4,0.3l18.4-0.2l23.5-0.7l17.2-1.2l12.4-0.3l12.7-1.4l0.5-3l3.9,2.1l3.4-0.5l3.4-0.3l2.1-5.6l-2.1-1.2l0.5-1.7l2.1-0.5l5-6.9l4.8-4.1l3.9-2.8l0.5,1.7l6-1.7l3.4,0.5l0.3,0.5l2.3,0.2l0.5-4.1l2.5-0.3l-0.7-3.7l-2.8,0.7z", name: "Virginia" },
  WA: { path: "M184.9,207.2l-4.6-24.5l-3.7,2.3l-6.3-0.5l-5.6-1.4l-3.5-0.3l-2.6-1.4l-4.8-0.5l-5-1.4l-2.6-2.3l-5.5-0.9l-5.3-1.4l-0.9,1l-6.5-1.7l-4.6-1.9l-4.3-2.5l-2.3-3.2l-1.2-3.9l-0.7-0.2l-1.4,2.5l-5.3,3.2l-3.4,0.3l-4.6-1l-6.2,0.2l-0.5,4.4l1.2,1.4l-3,4.3l-1.2,6.2l-1.4,2.6l0.7,4.6l1.6,0.9l-0.2,4.3l-0.5,1.9l3.2,6.5l0,5l2.8,5l-0.2,6l-1.7,4.6l-0.3,4.4l-0.9-3l-1.2-1.2l-0.5-4.1l-2.5-1.4l-0.5-1.4l-1.2,0.5l-0.5-2.1l0.7-3l-0.5-0.9l-1.6,2.3l-2.1,0.7l0.2-1.6l1-1.9l-0.7-3.4l-1.4-0.5l-0.7,1.6l-0.7-1.9l0.9-1.9l0.2-4.6l-1.9-0.5l0-1.6l1.6-0.2l0.3-5l-0.7-0.5l0.5-3.7l1.6-0.7l-0.2-4.1l-1.4-2.5l2.6-8.4l0.3-3.4l-0.9-2.5l0.9-2.5l0-2.5l-1.7-3.2l1.4-5.5l-0.5-2.3l0.3-2.3l1.4-0.3l0.5,1.2l0.2,3.2l1.2,2.5l1.9,0.5l1-1.9l2.8,0.2l0.9,1l2.3-0.2l3.7-2.6l2.3,1.4l2.1,0.5l1.9-0.5l3.5-3.2l5.1,1.4l4.4-0.3l0-1.2l6.5,2.1l3.7,0.2l2.3,1.4l3.2-1.2l4.3,0.5l2.1-1.4l5.3,0.9l-0.2,3l1.4,3l0.7,3.2l-1,3.4l1.2,3.2l-0.5,3.4l1.6,3.2l-0.2,5.8l1.6,5l1.7,8.3z", name: "Washington" },
  WV: { path: "M742.6,324l-0.7,3.7l-3.9,3l-2.6,5.5l-0.5,5.1l-5.8-4.3l-6.9-1.9l-1.6,1.4l-2.6-0.3l-0.5-2.3l-3.5-0.3l-3-3.2l-4.4,4.4l-3.5-0.7l-2.5,2.6l-2.6-3l-3.7,0.2l-3,3.7l-0.9,3l-4.1-0.7l-2.3-0.3l-1.4-3.2l-3.9-0.9l0.9-5l2.6-1.4l-1.4-1.2l1.7-3l-0.2-10.3l2.1-9.6l0.9-7.7l-0.5-3.7l-3.2-1.7l-0.7-2.1l3.5-3l-0.2-2.8l-3.2-5.5l-0.9-3.7l-4.4-6.3l-2.5-5.1l-1.4-3l5.5-1l11.5-1.6l5.5-1l6.5-0.9l23.5-2.6l2.6,16.8l1.9,8.9l0,3.4l1.2,3.7l-1.6,4.4l-0.5,6.5l1.9,9.1l0.7,5.3l3.5,1.9l2.6,2.3l4.6-0.7l3,0.7l3.9,4.6l3.4,0.3l1.6-2.3l-5.1-3.5l-2.3-1.7l0.2-2.3l-2.3-3l1-4.1l-4.1-5l-0.5-2.3l-2.3-2.3l5.1-0.7l0.7-0.5l3.2,5.5l0.2,2.8l-3.5,3l0.7,2.1l3.2,1.7l0.5,3.7l-0.9,7.7z", name: "West Virginia" },
  WI: { path: "M599.6,200.8l-1.7,1.9l0.5,3.7l-5.5,4.6l-2.5,6l0.9,4.3l2.6,1.4l0.2,2.8l-2.5,1.9l0.2,4.6l-0.7,0.5l-2.6,0.2l-8.3,0l-5.5,0.2l-7,0.3l-1.6,2.1l-3.2,1.4l-2.3-2.1l-5.3,0.5l-3.5,2.5l-3.4,0.5l0.2-2.5l0.2-3.4l-2.3-4.6l-4.1-4.1l-0.5-5.3l1.2-6l-0.2-8.9l-2.6-5.5l-0.5-5.5l1.2-3l0.7-6l-2.5-4.8l-0.7-5.5l0-3.5l0.9-5.1l0.5-6.9l-0.9-4.1l-5.1-0.2l-1.4-0.9l-0.2-5.8l3.5-5.1l4.3-2.5l-0.5-6l-2.5,0l-3-2.1l-0.7-8.8l-2.5-2.1l-2.5-0.3l-2.1-2.8l-1.4-4.1l-4.4-3l-1-2.1l-4.3-0.5l-0.7,0.5l-2.6-1.6l-0.5-6.3l-5-0.5l-0.2-1.9l-4.1,0.3l-2.5-1.6l1-1.6l6.3-3l3.2-0.9l4.6-3.4l2.1-2.5l5.8-3l3.9,0l0.7,1.4l0.9-0.2l0.7-2.6l4.3-1l5.3,0.7l2.1-0.9l3,2.3l1.2-0.7l4.6,1.9l1,1.6l3,0.7l1.6,2.8l-1.4,2.5l0,1.4l2.3,1.4l0.2,2.8l-1.6,2.6l0.5,2.5l2.3,0l1.9,3.5l7.4,3.5l2.3,0l3.4,3.7l3.4,3l-1.7,1.7l1.2,1l6.9,1.6l4.8,2.3l-0.2,1.4l-2.6,0.9l-5.1-0.5l-2.3,1.9l-3.9,0.7l0.5,4.8l-1,3.2l-2.1,1.4l-2.1,2.8l-0.3,2.8l3.4,2.1l3.4,4.3l2.3,3.7l2.1,1.6l2.5,1l0.5,4.8l-0.5,2.5l-4.1,3.2l-1.9,0.2l-0.5,4.3l-1.2,0.7l0.9,4.6l1.9,0.3l3.2-1.7l0.9,0.5l-1.7,3.2l-3.2,4.4l-0.2,2.8l10.5-3.2l2.3,0l2.6-1.2l2.8-0.2l0.2-2.3l2.1-1.6l5.8-1.6l2.8-1.9l10.1-2.6l1.2-2.6l4.6-2.1l0.5,1.2l1.6-0.2l2.3-2.3l4.4-1.6l1.9-0.7l2.3,2.6l3.4,5l0.5,6.5l-1,0.7l-0.3,4.3l-1.6,1.9l0.3,1.9l3-0.2l3.4-2.6l-0.5-2.1l0.9-2.5l1.9-0.3l-0.2-1.6l-1.2-0.7l-0.2-4.6l2.1-0.7l0.5-2.3l2.1,0.9l0.2-1.9l-1.4-2.6l0.7-1.4l-0.7-4.6l-1.6-1l2.3-3.9l0.9-3.7l-0.3-2.6l1-2.6l0.5-4.6l-1.6-5.8l-1.7-0.9l0.5-4.3l-1.4-1.4l-0.7-2.6l2.1-3l1.4-1.9l2.8-5l-0.2-1.2l-2.5-0.7l-2.3,0.5l-0.5,2.6l-3.2,1.4l-4.4-0.5l-1-1.2l-6.2,0l-3.2,0.5l-3.4-1.2l-3.4-1.4l-5,0.9l-3.9,1l-3.5,3.4l-3.4,1.9l-4.1,0.5l-1.7,1.7l-2.3-0.5l0.9-1.4l-0.5-1.2l1.9-4.1l0.5-2.1l-1.6-0.7l0.3-3.5l-1-1l0.7-1.7l-0.5-1.7l1-2.5l-1.6-3.4l1.9-3.4l0.2-2.1l-2.3-0.5l-0.9-1.7l-0.5-4.1l-1.7-2.5l0.5-2.3l-1.6-0.9l0.2-1.4l-2.5-1.6l-2.6,0.2l-3,1.7l-3.5,0l-0.5,4.8l-3.7,4.6l-0.2,3l0.7,1.7l-0.5,1.6l-1.4,0l-1.7,1.4l-0.3,2.1l0.3,2.8l-1.4,2.3l0.2,1.9l-2.3,4.4l-5.3,3.5l-1.6,0.3l-3.4,4.6l0.9,2.3l-0.5,2.3l-3.5,1.9l-3.9,3l-3.4,0l-0.5,0.7l0.5,3.7l2.1,1.4l5.5-0.9l4.3,0.2l0.7,1l0,2.6l-4.3-0.3l-7.2,0l-7.7,0.5l-12.6,1.4z", name: "Wisconsin" },
  WY: { path: "M313.2,148l-4.1,38.8l-4.4,34.8l-44.1-5l-50.6-5.5l5.5-42.3l-19.5-2.5l0.2-2.5l-0.7-2.5l-3.2-3.5l0.9-4.6l-0.5-1.2l-3.4-2.6l-1.4-2.6l0-5.8l2.3-3.7l-0.7-1.2l-2.5-1.9l-4.1-5.8l-1.9-4.6l1.4-2.6l-2.8-5l3.2-6.7l-1.2-1.4l-4.8-7l0.2-4.3l-4.4-4.1l-1.9-5l-4.3-3.5l-0.9-4.8l3.4-7l0.7,1.4l22.3,2.6l18.6,2.6l21.5,3.4l14.6,2.5l14.4,2.8l9.1,1.7l8.1,1.4z", name: "Wyoming" },
  DC: { path: "M801.8,290l-1.1-1.5l1.6-2.8l1.7,0.5l0.5,1.1l-0.9,1.5z", name: "Washington D.C." },
};

const USMap = () => {
  const [hoveredState, setHoveredState] = useState<string | null>(null);
  const navigate = useNavigate();
  const { data: stateScores, isLoading } = useStateScores();

  const handleStateClick = (stateCode: string) => {
    navigate(`/state/${stateCode}`);
  };

  if (isLoading) {
    return (
      <div className="w-full aspect-[1.6/1] flex items-center justify-center">
        <Skeleton className="w-full h-full rounded-2xl" />
      </div>
    );
  }

  return (
    <div className="relative w-full">
      <svg
        viewBox="60 50 840 520"
        className="w-full h-auto"
        style={{ maxHeight: '600px' }}
      >
        <defs>
          {/* Gradients for score colors */}
          <linearGradient id="excellentGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#22c55e" />
            <stop offset="100%" stopColor="#16a34a" />
          </linearGradient>
          <linearGradient id="goodGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#84cc16" />
            <stop offset="100%" stopColor="#65a30d" />
          </linearGradient>
          <linearGradient id="averageGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#eab308" />
            <stop offset="100%" stopColor="#ca8a04" />
          </linearGradient>
          <linearGradient id="poorGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#f97316" />
            <stop offset="100%" stopColor="#ea580c" />
          </linearGradient>
          <linearGradient id="badGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="#ef4444" />
            <stop offset="100%" stopColor="#dc2626" />
          </linearGradient>
          <linearGradient id="defaultGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stopColor="hsl(215, 20%, 75%)" />
            <stop offset="100%" stopColor="hsl(215, 20%, 65%)" />
          </linearGradient>
          
          {/* Drop shadow filter */}
          <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="2" stdDeviation="3" floodOpacity="0.15" />
          </filter>
          <filter id="hoverShadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="4" stdDeviation="6" floodOpacity="0.25" />
          </filter>
        </defs>
        
        {/* Background */}
        <rect x="60" y="50" width="840" height="520" fill="transparent" />
        
        {/* State paths */}
        {Object.entries(statePaths).map(([stateCode, { path, name }]) => {
          const stateData = stateScores?.find(s => s.abbr === stateCode);
          const score = stateData?.score || 0;
          const isHovered = hoveredState === stateCode;
          
          return (
            <g key={stateCode}>
              <path
                d={path}
                fill={score > 0 ? getScoreGradient(score) : "url(#defaultGradient)"}
                stroke="hsl(0, 0%, 100%)"
                strokeWidth={isHovered ? "2" : "1"}
                strokeLinejoin="round"
                className="cursor-pointer transition-all duration-200"
                style={{
                  filter: isHovered ? "url(#hoverShadow)" : "url(#dropShadow)",
                  transform: isHovered ? "translate(-1px, -1px)" : "none",
                  transformOrigin: "center",
                }}
                onMouseEnter={() => setHoveredState(stateCode)}
                onMouseLeave={() => setHoveredState(null)}
                onClick={() => handleStateClick(stateCode)}
              />
            </g>
          );
        })}
      </svg>
      
      {/* Tooltip */}
      {hoveredState && stateScores && (
        <div 
          className="absolute pointer-events-none z-10 bg-card border border-border rounded-lg shadow-lg px-4 py-3 text-sm"
          style={{
            left: '50%',
            top: '10px',
            transform: 'translateX(-50%)',
          }}
        >
          <div className="font-semibold text-foreground">
            {statePaths[hoveredState]?.name || hoveredState}
          </div>
          <div className="text-muted-foreground mt-1">
            {(() => {
              const stateData = stateScores.find(s => s.abbr === hoveredState);
              if (stateData && stateData.score > 0) {
                return (
                  <div className="flex items-center gap-2">
                    <span>Avg Score:</span>
                    <span 
                      className="font-bold"
                      style={{ color: getScoreColor(stateData.score) }}
                    >
                      {stateData.score.toFixed(0)}
                    </span>
                    <span className="text-xs">({stateData.memberCount} members)</span>
                  </div>
                );
              }
              return "No data available";
            })()}
          </div>
        </div>
      )}
      
      {/* Legend */}
      <div className="flex justify-center gap-4 mt-6 flex-wrap">
        <div className="flex items-center gap-2 text-sm">
          <div className="w-4 h-4 rounded" style={{ background: "linear-gradient(135deg, #22c55e, #16a34a)" }} />
          <span className="text-muted-foreground">80+ Excellent</span>
        </div>
        <div className="flex items-center gap-2 text-sm">
          <div className="w-4 h-4 rounded" style={{ background: "linear-gradient(135deg, #84cc16, #65a30d)" }} />
          <span className="text-muted-foreground">70-79 Good</span>
        </div>
        <div className="flex items-center gap-2 text-sm">
          <div className="w-4 h-4 rounded" style={{ background: "linear-gradient(135deg, #eab308, #ca8a04)" }} />
          <span className="text-muted-foreground">60-69 Average</span>
        </div>
        <div className="flex items-center gap-2 text-sm">
          <div className="w-4 h-4 rounded" style={{ background: "linear-gradient(135deg, #f97316, #ea580c)" }} />
          <span className="text-muted-foreground">50-59 Poor</span>
        </div>
        <div className="flex items-center gap-2 text-sm">
          <div className="w-4 h-4 rounded" style={{ background: "linear-gradient(135deg, #ef4444, #dc2626)" }} />
          <span className="text-muted-foreground">&lt;50 Needs Work</span>
        </div>
      </div>
    </div>
  );
};

export default USMap;
